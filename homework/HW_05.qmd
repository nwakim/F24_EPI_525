---
title: "Homework 5"
subtitle: "Lessons 9-10"
author: "Your name here - update this!!!!"
date: "Due 11/7/24"
format: 
  html:
    link-external-newwindow: true
    toc: true
    toc_float:
      collapsed: false
    number-sections: true
    number-depth: 3
    theme: lumen
    self-contained: true
    html-math-method: mathjax
---

```{r}
#| label: "setup"
#| include: false
knitr::opts_chunk$set(echo = TRUE)
```


**Due 11/7/24**

Download the .qmd file for this assignment from [Github](https://github.com/nwakim/F24_EPI_525/blob/main/homework/HW_05.qmd).


## Directions {.unnumbered}

* Please upload your homework to Sakai. __Upload both your .qmd code file and the rendered .html file__.
* For each question, make sure to include all code and resulting output in the html file to support your answers. 


### R & LaTeX code for probability distributions {.unnumbered}

* See the .qmd files with the code from class notes for LaTeX and R code.
* The LaTeX code will make it easier to show your work in computations.

:::{.callout-tip}
It is a good idea to try rendering your document from time to time as you go along!  Note that rendering automatically saves your Qmd file and rendering frequently helps you catch your errors more quickly.
:::


# Book exercises {.unnumbered}

## 1.24 Income and education in US counties {.unnumbered}

## 1.28 Mix-and-match {.unnumbered}

## 1.36 Associations {.unnumbered}



## 4.2 Heights of adults {.unnumbered}


## 4.4 Mental health, Part I {.unnumbered}



## 4.6 Thanksgiving spending, Part I {.unnumbered}



## 4.8 Age at first marriage, Part I {.unnumbered}


# Non-book

## Clinican time with patients

*Suppose a clinician schedules 20 minutes to spend with each of their patients. However, they sometimes run over or end earlier. Based on past data, the mean "extra" time they spend with a patient is 3 minutes with a standard deviation of 2 minutes. Suppose they see 13 patients today and the extra times they spend with  patients are independent from patient to patient.*

### Expected total time

**Find the expected total time they will spend with all of their patients today.**


### SD of total time

**Find the standard deviation of the total time they will spend with all of their patients today.**

## The Ethan Allen

On October 5, 2005, a tour boat named the Ethan Allen capsized on Lake George in New York with 47 passengers aboard. In the inquiries that followed, it was suggested that the tour operators should have realized that the combined weight of so many passengers was likely to exceed the weight capacity of the boat. Could they have predicted this?  

* The maximum weight capacity of passengers that the Ethan Allen could accommodate was estimated to be 7500 pounds. 
* Data from the Centers for Disease Control and Prevention indicate that weights of American adults in 2005 had a mean of 167 pounds and a standard deviation of 35 pounds.


If the tour boat company consistently accepted 47 passengers, what we want to know is the probability that the combined weight of the 47 passengers would exceed this capacity.


### Maximum average weight

__With 47 passengers on board, what is the maximum average weight that the Ethan Allen could accommodate?__



### Probability an individual weighs more than the maximum average weight 

__Assuming that the weights of American adults in 2005 can be modeled with a normal distribution, find the probability that an individual weighs more than the maximum average weight the Ethan Allen can accommodate.__



### Probability a random sample of 47 American adults has an average weight greater than the maximum average weight

__Calculate the probability that a random sample of 47 American adults has an average weight greater than the maximum average weight the Ethan Allen can accommodate.__  



### What theorem did you use in the previous part, and why were you able to apply it to this problem?



### Could the tour operators have predicted realized that the combined weight of so many passengers was likely to exceed the weight capacity of the Ethan Allen?  


# R exercises 

## Load all the packages you need below here


# R1: NHANES

* Below you will be using the dataset called NHANES from the `NHANES` R package. 
* Install and load the NHANES package using the code below.
    * This loads the dataset also called NHANES that is within the NHANES package.

```{r eval=FALSE}
install.packages("NHANES")
```

```{r}
library(NHANES)
data("NHANES")
```


> The National Health and Nutrition Examination Survey (NHANES) is a survey conducted annually by the US National Center for Health Statistics (NCHS). While the original data uses a survey design that oversamples certain subpopulations, the data have been reweighted to undo oversampling effects and can be treated as if it were a simple random sample from the American population.

* To view the complete list of study variables and their descriptions, access the NHANES documentation page with `?NHANES`. 
  * You must first install the `NHANES` package to see the help files.


## What are the dimensions and column names of the dataset?



## How many unique ID identifiers are in the dataset? Compare this to the number of rows in the dataset. What is the explanation for these two different numbers?  



## Using numerical and graphical summaries, describe the distribution of ages among study participants.




## Using numerical and graphical summaries, describe the distribution of heights among study participants.



## Investigate at which age people generally reach their adult height. Is it possible to do the same for weight; why or why not? 

*Use whatever EDA tools you think are appropriate to answer this question.*




## Calculate the median and interquartile range of the distribution of the variable `Poverty`. Write a sentence explaining the median and IQR in the context of these data.


# R2: NHANES

Continue using the same NHANES data as for the previous problem. 


:::{.callout-warning}

* For most of the summary statistic base R commands (such as `mean()`, `sd()`, `median()`, etc.), you will get `NA` as the result if there are missing values. 
* In order for R to compute the statistic using the values in the data set, you need to tell R to remove the missing values using the `na.rm = TRUE` option within the parentheses of the command: `mean(dataset$variablename, na.rm = TRUE)`. 
:::

## Use the `mutate()` command explained on Slide 23 (pdf pg 22) of the Day 3 Part 3 notes to create a new column (variable) in the NHANES dataset for the heights in inches. Then find the mean and standard deviation of the heights in inches. Note that 1 centimeter is approximately 0.3937 inches.

:::{.callout-tip}

## Tips

* Column names cannot start with a number or symbol
* Names are case sensitive
* It's easier to work with column names that don't have spaces in them. I usually use _ or . instead of spaces.
:::

## What proportion of Americans at least 25 years of age are college graduates?
*Hint: First create a new dataset that is restricted to Americans at least 25 years old.*




## What proportion of Americans at least 25 years of age with a high school degree are college graduates?



## Two-way table

__Construct a two-way table (contingency table), with `PhysActive` as the row variable and `Diabetes` as the column variable. Among participants who are not physically active, what proportion have diabetes? What proportion of physically active participants have diabetes?__



## Relative Risk

__In this context, relative risk is the ratio of the proportion of participants who have diabetes among those who are not physically active to the proportion of participants with diabetes among those physically active. Relative risks greater than 1 indicate that people who are not physically active seem to be at a higher risk for diabetes than physically active people. Calculate the relative risk of diabetes for the participants. From these calculations, is it possible to conclude that being physically active reduces one's chance of becoming diabetic?__




## Load all the packages you need below here. 


## R1: Youth weights

In this exercise you will use the YRBSS dataset we used in class on Day 8, to simulate the distribution of mean weights from repeated samples. Use the code from class where we simulated mean heights, and apply it to the weights (in pounds) as directed below. 


:::{.callout-important}

You will need to install and load the `moderndive` R package to use the `rep_sample_n()` command from the class notes.

:::


### Use the `set.seed()` command to set a randomization seed. Use whatever number you want for the seed.



### Take 1000 random samples of size 10 and save the tibble with the random samples. Show the first 20 lines of this tibble.



### Create a tibble with mean weights from the 1000 random samples. Show the first 10 rows of this tibble.



### Make a histogram of the 1000 mean weights. What do we call this distribution? Describe the shape of the distribution.


### Calculate the mean and standard deviation of the 1000 sample mean weights. What is another name for this standard deviation?



### What are the theoretical values for mean and standard deviation of the sampling distribution from the CLT, and how do your simulated values compare to the theoretical values?

# R exercises 

## Load all the packages you need below here. 





## R1: Youth weights

In this exercise you will use the YRBSS dataset again that we used in class on Days 8-9, to simulate the distribution of mean weights from repeated samples. 


### Use the `set.seed()` command to set a randomization seed. Use whatever number you want for the seed.


### CI 

__Suppose you took a random sample of size 50 from the YRBSS data, that has mean weight 130 pounds. Calculate and interpret a 90% confidence interval using the standard deviation of weights from the YRBSS "population."__


### Another CI 

__Calculate and interpret a 90% confidence interval assuming the standard deviation of weights from the random sample is 40.__ 




## R2: Swim times

* In these exercises you will use R to work through the swim times example from Section 5.2 in the textbook. 
* The data are in the `oibiostats` package and called `swim`.


### Mean & SD of differences 

__Calculate the mean and standard deviation for the differences in swim times, and compare them to the ones in the book. Which order were the differences calculated, wet suit - swim suit or the opposite? Were all the differences positive?__ 


### Dot plot of differences

__Create a dot plot of the differences in swim times and comment on the distribution shape.__ 


### Hypothesis test

__Run the appropriate statistical test in R as both a one-sample t-test and a paired t-test to verify the test statistic, p-value, and CI in the text. Use inline R code to pull these values from the test output when writing up your comparison of these values to the book's values.__ 



