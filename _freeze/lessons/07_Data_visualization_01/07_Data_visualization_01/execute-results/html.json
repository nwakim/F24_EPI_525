{
  "hash": "62fdbf1d2a19ad0834bc958c181ed58b",
  "result": {
    "markdown": "---\ntitle: \"Lesson 7: Data visualization - Part 1\"\nauthor: \"Meike Niederhausen and Nicky Wakim\"\ntitle-slide-attributes:\n    data-background-color: \"#3070BF\"\ndate: \"10/21/2024\"\nformat: \n  revealjs:\n    theme: \"../simple_NW.scss\"\n    chalkboard: true\n    slide-number: true\n    show-slide-number: all\n    width: 1955\n    height: 1100\n    footer: Lesson 7 Slides\n    html-math-method: mathjax\n    highlight-style: arrow\nexecute:\n  echo: true\n  freeze: auto\n---\n\n\n\n\n# Learning Objectives\n\n1.  Visualizing distributions of numeric data: histograms and boxplots\n\n2.  transforming data (log values)\n\n3.  data viz, categorical: bar plot\n\n4.  case study? dds.disc\n\n## \n\n![Artwork by \\@allison_horst](../img_slides/debugging.png){fig-alt=\"A cartoon of a fuzzy round monster face showing 10 different emotions experienced during the process of debugging code. The progression goes from (1) “I got this” - looking determined and optimistic; (2) “Huh. Really thought that was it.” - looking a bit baffled; (3) “...” - looking up at the ceiling in thought; (4) “Fine. Restarting.” - looking a bit annoyed; (5) “OH WTF.” Looking very frazzled and frustrated; (6) “Zombie meltdown.” - looking like a full meltdown; (7) (blank) - sleeping; (8) “A NEW HOPE!” - a happy looking monster with a lightbulb above; (9) “insert awesome theme song” - looking determined and typing away; (10) “I love coding” - arms raised in victory with a big smile, with confetti falling.\"}\n\n## From Lesson 2: Example: the frog study[^1]\n\n[^1]: From *Introductory Statistics for the Life and Biomedical Sciences*\n\nIn evolutionary biology, parental investment refers to the amount of time, energy, or other resources devoted towards raising offspring.\n\n \n\nWe will be working with the `frog` dataset, which originates from a 2013 study[^2] about maternal investment in a frog species. Reproduction is a costly process for female frogs, necessitating a trade-off between individual egg size and total number of eggs produced.\n\n[^2]: Chen, W., et al. Maternal investment increases with altitude in a frog on the Tibetan Plateau. Journal of evolutionary biology 26.12 (2013): 2710-2715.\n\n    ## \n\n \n\nResearchers were interested in investigating how maternal investment varies with altitude. They collected measurements on egg clutches found at breeding ponds across 11 study sites; for 5 sites, the body size of individual female frogs was also recorded.\n\n \n\n \n\n## From Lesson 2: Four rows from frog data frame\n\n\\captionsetup[table]{labelformat=empty}\n\n\n::: {.cell}\n\n:::\n\n\n|     | altitude | latitude | egg.size | clutch.size | clutch.volume | body.size |\n|-----|----------|----------|----------|-------------|---------------|-----------|\n| 1   | 3,462.00 | 34.82    | 1.95     | 181.97      | 177.83        | 3.63      |\n| 2   | 3,462.00 | 34.82    | 1.95     | 269.15      | 257.04        | 3.63      |\n| 3   | 3,462.00 | 34.82    | 1.95     | 158.49      | 151.36        | 3.72      |\n| 150 | 2,597.00 | 34.05    | 2.24     | 537.03      | 776.25        | NA        |\n\n \n\n-   Each **row** is an [**observation**]{style=\"color:#BF396F;\"}\n-   Each **column** is a [**variable**]{style=\"color:#459B99;\"}\n-   All the [**observations**]{style=\"color:#BF396F;\"} and [**variables**]{style=\"color:#459B99;\"} together make a [**data frame**]{style=\"color:#8043F3;\"} (sometimes called data matrix)\n\n \n\n-   **Missing values:** `NA` means the measured value for body size in clutch #150 is missing\n\n## From Lesson 2: Exploring data initially\n\n-   Techniques for exploring and summarizing data **differ** for [**numerical**]{style=\"color:#E75B5C;\"} versus [**categorical**]{style=\"color:#EF85B3;\"} variables.\n\n \n\n-   Numerical and graphical summaries are useful for examining variables one at a time\n    -   Can also be used for exploring the relationships between variables\n    -   *Numerical* summaries are not just for [**numerical**]{style=\"color:#E75B5C;\"} variables (certain ones are used for [**categorical**]{style=\"color:#EF85B3;\"} variables)\n\n \n\n-   Today we we look at ways to **visualize** a [**numerical**]{style=\"color:#E75B5C;\"} variable and a [**categorical**]{style=\"color:#EF85B3;\"} variable\n\n# Learning Objectives\n\n# Visualize numerical variables with `ggplot`\n\n## Histograms\n\n::::: columns\n::: {.column width=\"45%\"}\n-   Histograms show the counts of observations (y-axis) that have values within a specific interval for a specific variable (x-axis)\n-   Show the shape of the distribution and data density\n-   Distribution is considered **symmetric** if the trailing parts of the plot are roughly equal\n-   Distribution is considered **asymmetric** if one tail trails off more than the other (as we see with clutch volume)\n-   Asymmetric distributions are said to be skewed\n    -   **Skewed right** if trails off to right\n    -   **Skewed left** if trails off to the left\n:::\n\n::: {.column width=\"55%\"}\n![](../img_slides/frog_hist.png){fig-align=\"center\" fig-width=\"400\" width=\"1000\"}\n:::\n:::::\n\n## Histograms\n\n-   Mode is represented by the tallest peak in the distribution\n-   When data have one prominent peak, we call it unimodel\n-   If there is more than one relative peak, we call it multimodel\n\n![](../img_slides/dist_1.19.png)\n\n## Histograms\n\nWe can make a histogram of clutch volume or clutch size:\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = frog, \n       aes(x = clutch.volume)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = frog, \n       aes(x = clutch.size)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Poll Everywhere Question 1\n\n## Boxplots\n\n::::: columns\n::: {.column width=\"43%\"}\n-   A **boxplot** indicates the positions of the first, second, and third quartiles of a distribution in addition to extreme observations\n-   Interquartile range (IQR) represented by rectangle with black line through it for the median\n-   Whiskers extend from the box to capture data that are between $Q_1$ and $Q_1 - 1.5 IQR$ and separately between $Q_3$ and $Q_3 + 1.5 IQR$\n-   An **outlier** is a value that appears extreme relative to the rest of the data\n    -   It is more than $1.5IQR$ away from $Q_1$ and $Q_3$\n:::\n\n::: {.column width=\"57%\"}\n![](../img_slides/boxplot_CV.png){width=\"1100\"}\n:::\n:::::\n\n## Boxplots\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-3\"}\nggplot(data = frog, \n       aes(x = clutch.volume)) + \n  geom_boxplot() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-5-1.png){width=576}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-3\"}\nggplot(data = frog, \n       aes(y = clutch.volume)) + \n  geom_boxplot() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-6-1.png){width=480}\n:::\n:::\n\n:::\n:::::\n\n## We may want to transform data\n\n-   When working with strongly skewed data, it can be useful to apply a transformation\n\n-   Common to use the **natural log transformation** on skewed data \n    \n    -   We typically just call this the \"log transformation\"\n\n    -   Especially for variables with many values clustered near 0 and other observations that are positive\n    \n-   Transformations are mostly used when we make certain assumptions about the distribution of our data\n    - For a lot of statistics methods, we assume the data is distributed normally\n    - So we may need to transform the data to make it normal!\n\n## Let's transform clutch volume!\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = frog, \n       aes(x = clutch.volume)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = frog, \n       aes(x = log(clutch.volume))) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Poll everywhere question 2 \n\n# Visualize categorical data\n\n## From Lesson 4: Example: hypertension prevalence (1/2)\n\n-   US CDC estimated that between 2011 and 2014[^1], 29% of the population in America had hypertension\n\n \n\n-   A health care practitioner seeing a new patient would expect a 29% chance that the patient might have hypertension\n    -   However, this is **only the case if nothing else is known about the patient**\n\n[^1]: <https://www.cdc.gov/nchs/products/databriefs/db220.htm>\n\n\n## From Lesson 4: Example: hypertension prevalence\n\n- Prevalence of **hypertension varies significantly with age**\n    - Among adults aged 18-39, 7.3% have hypertension\n    - Adults aged 40-59, 32.2%\n    - Adults aged 60 or older, 64.9% have hypertension\n\n \n\n-   Knowing the age of a patient provides important information about the likelihood of hypertension\n    - Age and hypertension status are **not independent** (we will get into this)\n    \n-   While the probability of hypertension of a randomly chosen adult is 0.29...\n    \n    -   The **conditional probability** of hypertension in a person known to be 60 or older is 0.649\n\n \n\n## From Lesson 4: Contingency tables \n\n- We can start looking at the **contingency table** for hypertension for different age groups\n  - **Contingency table:** type of data table that displays the frequency distribution of two or more categorical variables\n  \n\n::: {.cell}\n::: {.cell-output-display}\nTable: Table: Contingency table showing hypertension status and age group, in\nthousands.\n\n|Age Group             | Hypertension| No Hypertension|  Total|\n|:---------------------|------------:|---------------:|------:|\n|18-39 years           |         8836|          112206| 121042|\n|40 to 59 years        |        42109|           88663| 130772|\n|Greater than 60 years |        39917|           21589|  61506|\n|Total                 |        90862|          222458| 313320|\n:::\n:::\n\n\n## Let's look at each variable separately\n\n- The label \"contingency tables\" are usually reserved for when we have two variables in one table\n- When we have one variable, we often call these **frequency tables**\n  - Shows the count of observati\n\n\n## Barplots\n\n\n\n\n# Case study\n\n## Case Study Description\n\n-   In the US, individuals with developmental disabilities typically receive services and support from state governments.\n\n    -   California allocates funds to developmentally disabled residents through the *Department of Developmental Services (DDS)*\n    -   Recipients of DDS funds are referred to as \"consumers.\"\n\n \n\n-   Dataset `dds.discr`\n\n    -   Sample of 1,000 DDS consumers (out of a total of \\~ 250,000)\n    -   Data include [age, sex assigned at birth, race/ethnicity, and annual DDS financial support per consumer]{style=\"color:#C83532\"}\n\n \n\n-   For now, we are going to explore these data with `R`\n\n-   See Section 1.7.1 in the textbook for more details\n\n## Load `dds.discr` dataset from `oibiostat` package\n\n-   The textbook's datasets are in the R package `oibiostat`\n\n-   Make sure the `oibiostat` package is installed before running the code below.\n\n-   Load the `oibiostat` package and the dataset `dds.discr`\n\n \n\n[**The code below needs to be run *every time* you restart R or render a Qmd file:**]{style=\"color:#BF396F\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(oibiostat)\ndata(\"dds.discr\")\n```\n:::\n\n\n \n\n-   After loading the dataset `dds.discr` using `data(\"dds.discr\")`, you will see `dds.discr` in the Data list of the Environment window.\n\n## `glimpse()`\n\n-   We previously used the base R structure command `str()` to get information about variable types in a dataset (in R03: R basics part 2)\n-   Use `glimpse()` from the `tidyverse` package (technically it's from the `dplyr` package) to get information about variable types.\n-   `glimpse()` tends to have nicer output for `tibbles` than `str()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nglimpse(dds.discr)  # from tidyverse package (dplyr)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,000\nColumns: 6\n$ id           <int> 10210, 10409, 10486, 10538, 10568, 10690, 10711, 10778, 1…\n$ age.cohort   <fct> 13-17, 22-50, 0-5, 18-21, 13-17, 13-17, 13-17, 13-17, 13-…\n$ age          <int> 17, 37, 3, 19, 13, 15, 13, 17, 14, 13, 13, 14, 15, 17, 20…\n$ gender       <fct> Female, Male, Male, Female, Male, Female, Female, Male, F…\n$ expenditures <int> 2113, 41924, 1454, 6400, 4412, 4566, 3915, 3873, 5021, 28…\n$ ethnicity    <fct> White not Hispanic, White not Hispanic, Hispanic, Hispani…\n```\n:::\n:::\n\n\n## Some things to note on this dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(dds.discr)  # from tidyverse package (dplyr)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,000\nColumns: 6\n$ id           <int> 10210, 10409, 10486, 10538, 10568, 10690, 10711, 10778, 1…\n$ age.cohort   <fct> 13-17, 22-50, 0-5, 18-21, 13-17, 13-17, 13-17, 13-17, 13-…\n$ age          <int> 17, 37, 3, 19, 13, 15, 13, 17, 14, 13, 13, 14, 15, 17, 20…\n$ gender       <fct> Female, Male, Male, Female, Male, Female, Female, Male, F…\n$ expenditures <int> 2113, 41924, 1454, 6400, 4412, 4566, 3915, 3873, 5021, 28…\n$ ethnicity    <fct> White not Hispanic, White not Hispanic, Hispanic, Hispani…\n```\n:::\n:::\n\n\n-   This happens in older datasets (and honestly some newer ones): gender and sex get conflated\n    -   I try to catch these issues before sharing datasets with you, but when we load datasets directly from the `oibiostat` package, I can't make these changes\n    -   If you are unfamiliar with the differences, please see [this NIH site on sex and gender](https://orwh.od.nih.gov/sex-gender)\n-   Also, race and ethnicity can be mislabeled\n    -   \"White not hispanic\" combines race and ethnicity\n    -   If you are unfamiliar with the differences, please see [this APA site on race and ethnicity](https://www.apa.org/topics/race-ethnicity)\n\n## `rename()`: one of the first things I usually do\n\n-   I want to rename the variable, gender, to sex and rename ethnicity to r_e (race and ethnicity)\n\n \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr1 = dds.discr %>% \n  rename(sex_MF = gender, \n         r_e = ethnicity)\n\nglimpse(dds.discr1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,000\nColumns: 6\n$ id           <int> 10210, 10409, 10486, 10538, 10568, 10690, 10711, 10778, 1…\n$ age.cohort   <fct> 13-17, 22-50, 0-5, 18-21, 13-17, 13-17, 13-17, 13-17, 13-…\n$ age          <int> 17, 37, 3, 19, 13, 15, 13, 17, 14, 13, 13, 14, 15, 17, 20…\n$ sex_MF       <fct> Female, Male, Male, Female, Male, Female, Female, Male, F…\n$ expenditures <int> 2113, 41924, 1454, 6400, 4412, 4566, 3915, 3873, 5021, 28…\n$ r_e          <fct> White not Hispanic, White not Hispanic, Hispanic, Hispani…\n```\n:::\n:::\n\n\n## Histograms\n\nWhat is being measured on the vertical axes?\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dds.discr1, \n       aes(x = age)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dds.discr1, \n       aes(x = expenditures)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Histograms showing proportions\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = dds.discr1, \n       aes(x = age)) +\n  geom_histogram(\n    aes(y = stat(density)))  \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-16-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4-6\"}\nggplot(data = dds.discr1, \n       aes(x = age)) +\n  geom_histogram(\n    aes(y = stat(density))) +  \n  scale_y_continuous(labels =   \n      scales::percent_format())  \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-17-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Density plots {visibility=\"hidden\"}\n\nWhat is being measured on the vertical axes?\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = dds.discr1, \n       aes(x = age)) +\n  geom_density() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-18-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = dds.discr1, \n       aes(x = age)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-19-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Boxplots\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-3\"}\nggplot(data = dds.discr1, \n       aes(x = age)) + \n  geom_boxplot() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-20-1.png){width=480}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-3\"}\nggplot(data = dds.discr1, \n       aes(y = age)) + \n  geom_boxplot() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-21-1.png){width=480}\n:::\n:::\n\n:::\n:::::\n\n# Categorical data\n\n## Barplots\n\n::::: columns\n::: {.column width=\"50%\"}\nCounts (below) vs.\\\npercentages (right)\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = dds.discr1, \n       aes(x = r_e)) +\n  geom_bar() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-22-1.png){width=576}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-6\"}\nggplot(data = dds.discr1, \n       aes(x = r_e)) +\n  geom_bar(aes(y = stat(prop),  \n               group = 1)) + \n  scale_y_continuous(labels =  \n      scales::percent_format())  \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-23-1.png){width=576}\n:::\n:::\n\n:::\n:::::\n\n## Adding more to plots!\n\nTilt text so we can read it!\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = dds.discr1, aes(x = r_e)) +\n  geom_bar(aes(y = stat(prop), group = 1)) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-24-1.png){width=1344}\n:::\n:::\n\n\n## Adding more to plots!\n\nWe can change labels!\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4-5\"}\nggplot(data = dds.discr1, aes(x = r_e)) +\n  geom_bar(aes(y = stat(prop), group = 1)) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  labs(x = \"Race and ethnicity\", y = \"Proportion\", \n       title = \"Proportion of individuals receiving DDS by race and ethnicity\")\n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-25-1.png){width=1344}\n:::\n:::\n\n\n## Adding more to plots!\n\nIncrease text size so we can read it!\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-5\"}\nggplot(data = dds.discr1, aes(x = r_e)) +\n  geom_bar(aes(y = stat(prop), group = 1)) +\n  theme(axis.text.x = element_text(angle = 60, hjust = 1, size = 35),\n        axis.title = element_text(size = 35))\n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-26-1.png){width=1344}\n:::\n:::\n\n\n# Meike's notes\n\n## Getting to know the dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(dds.discr)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1000    6\n```\n:::\n\n```{.r .cell-code}\nnames(dds.discr)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"id\"           \"age.cohort\"   \"age\"          \"gender\"       \"expenditures\"\n[6] \"ethnicity\"   \n```\n:::\n\n```{.r .cell-code}\nlength(unique(dds.discr$id)) # How many unique id's are there?\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1000\n```\n:::\n:::\n\n\n## `str()` structure\n\n::: {style=\"font-size: 80%;\"}\n-   We previously used the base R structure command `str()` to get information about variable types in a dataset.\n-   Note this dataset is a `tibble` instead of a `data.frame`\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(dds.discr)      # base R\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [1,000 × 6] (S3: tbl_df/tbl/data.frame)\n $ id          : int [1:1000] 10210 10409 10486 10538 10568 10690 10711 10778 10820 10823 ...\n $ age.cohort  : Factor w/ 6 levels \"0-5\",\"6-12\",\"13-17\",..: 3 5 1 4 3 3 3 3 3 3 ...\n $ age         : int [1:1000] 17 37 3 19 13 15 13 17 14 13 ...\n $ gender      : Factor w/ 2 levels \"Female\",\"Male\": 1 2 2 1 2 1 1 2 1 2 ...\n $ expenditures: int [1:1000] 2113 41924 1454 6400 4412 4566 3915 3873 5021 2887 ...\n $ ethnicity   : Factor w/ 8 levels \"American Indian\",..: 8 8 4 4 8 4 8 3 8 4 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   ID = col_integer(),\n  ..   `Age Cohort` = col_character(),\n  ..   Age = col_integer(),\n  ..   Gender = col_character(),\n  ..   Expenditures = col_integer(),\n  ..   Ethnicity = col_character()\n  .. )\n```\n:::\n:::\n\n\n<!-- ![](../img_slides/dds.discr_str.png){fig-align=\"center\"} -->\n\n## `glimpse()`\n\n::: {style=\"font-size: 80%;\"}\n**New: `glimpse()`**\n\n-   Use `glimpse()` from the `tidyverse` package (technically it's from the `dplyr` package) to get information about variable types.\n-   `glimpse()` tends to have nicer output for `tibbles` than `str()`\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nglimpse(dds.discr)  # from tidyverse package (dplyr)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,000\nColumns: 6\n$ id           <int> 10210, 10409, 10486, 10538, 10568, 10690, 10711, 10778, 1…\n$ age.cohort   <fct> 13-17, 22-50, 0-5, 18-21, 13-17, 13-17, 13-17, 13-17, 13-…\n$ age          <int> 17, 37, 3, 19, 13, 15, 13, 17, 14, 13, 13, 14, 15, 17, 20…\n$ gender       <fct> Female, Male, Male, Female, Male, Female, Female, Male, F…\n$ expenditures <int> 2113, 41924, 1454, 6400, 4412, 4566, 3915, 3873, 5021, 28…\n$ ethnicity    <fct> White not Hispanic, White not Hispanic, Hispanic, Hispani…\n```\n:::\n:::\n\n\n<!-- ![](../img_slides/dds.discr_glimpse.png){fig-align=\"center\"} -->\n\n## `summary()`\n\n::: {style=\"font-size: 80%;\"}\n-   We previously used the base R structure command `summary()` to get summary information about variables\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(dds.discr)      # base R\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       id        age.cohort       age          gender     expenditures  \n Min.   :10210   0-5  : 82   Min.   : 0.0   Female:503   Min.   :  222  \n 1st Qu.:31809   6-12 :175   1st Qu.:12.0   Male  :497   1st Qu.: 2899  \n Median :55384   13-17:212   Median :18.0                Median : 7026  \n Mean   :54663   18-21:199   Mean   :22.8                Mean   :18066  \n 3rd Qu.:76135   22-50:226   3rd Qu.:26.0                3rd Qu.:37713  \n Max.   :99898   51+  :106   Max.   :95.0                Max.   :75098  \n                                                                        \n              ethnicity  \n White not Hispanic:401  \n Hispanic          :376  \n Asian             :129  \n Black             : 59  \n Multi Race        : 26  \n American Indian   :  4  \n (Other)           :  5  \n```\n:::\n:::\n\n\n## `tbl_summary()`: summary table\n\n:::::: columns\n:::: {.column width=\"50%\"}\n::: {style=\"font-size: 80%;\"}\n-   **New:** Use `tbl_summary()` from the `gtsummary` package to get summary information\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# library(gtsummary)\ntbl_summary(dds.discr)\n```\n:::\n\n::::\n\n::: {.column width=\"50%\"}\n![](../img_slides/dds.discr_gtsummary.jpg){fig-align=\"center\" height=\"650\"}\n:::\n::::::\n\n# Visualize numerical variables with `ggplot`\n\n::::: columns\n::: {.column width=\"40%\"}\n![[ggplot](https://ggplot2.tidyverse.org/index.html)](../img_slides/ggplotlogo.png){fig-align=\"center\" height=\"400\"}\n:::\n\n::: {.column width=\"60%\"}\n![[Artwork by \\@allison_horst](https://allisonhorst.com/)](../img_slides/ggplot2_masterpiece.png){fig-align=\"center\" height=\"400\"}\n:::\n:::::\n\n## What data (variables) are included in the plot below?\n\n![](../img_slides/ggplot_basics_from_ppt_figure_only.png){fig-align=\"center\"}\n\n## Basics of a ggplot\n\n![](../img_slides/ggplot_basics_from_ppt.png){fig-align=\"center\"}\n\n## Grammar of ggplot2\n\n![[Kieran Healy](https://github.com/rstudio-conf-2020/dataviz)](../img_slides/khealy_ggplot1.png){fig-align=\"center\"}\n\n## Histograms\n\nWhat is being measured on the vertical axes?\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dds.discr, \n       aes(x = age)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-32-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dds.discr, \n       aes(x = expenditures)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-33-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Histograms showing proportions\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(data = dds.discr, \n       aes(x = age)) +\n  geom_histogram(\n    aes(y = stat(density)))  \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-34-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4-6\"}\nggplot(data = dds.discr, \n       aes(x = age)) +\n  geom_histogram(\n    aes(y = stat(density))) +  \n  scale_y_continuous(labels =   \n      scales::percent_format())  \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-35-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Distribution shapes\n\n![](../img_slides/distribution_shapes.png){fig-align=\"center\"}\n\n## Density plots\n\nWhat is being measured on the vertical axes?\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = dds.discr, \n       aes(x = age)) +\n  geom_density() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-36-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = dds.discr, \n       aes(x = age)) +\n  geom_histogram() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-37-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Dot plots\n\n::: {style=\"font-size: 80%;\"}\n-   Better for smaller samples\n-   What is being measured on the vertical axes?\n:::\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = dds.discr, \n       aes(x = age)) +\n  geom_dotplot(binwidth =1) \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-38-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(data = dds.discr, \n       aes(x = age)) +\n  geom_histogram(binwidth =1) \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-39-1.png){width=960}\n:::\n:::\n\n:::\n:::::\n\n## Boxplots\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-3\"}\nggplot(data = dds.discr, \n       aes(x = age)) + \n  geom_boxplot() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-40-1.png){width=480}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-3\"}\nggplot(data = dds.discr, \n       aes(y = age)) + \n  geom_boxplot() \n```\n\n::: {.cell-output-display}\n![](07_Data_visualization_01_files/figure-revealjs/unnamed-chunk-41-1.png){width=480}\n:::\n:::\n\n:::\n:::::\n\n## Boxplots: 5 number summary visualization\n\n<!-- ![](../img_slides/boxplot_no_outliers.png) -->\n\nNo outliers: ![https://www.simplypsychology.org/boxplots.html](../img_slides/boxplot_no_outliers.png){fig-align=\"center\" height=\"280\"}\n\nWith outliers: ![https://towardsdatascience.com/understanding-boxplots-5e2df7bcbd51](../img_slides/boxplot_w_outliers.png){fig-align=\"center\" height=\"300\"}\n",
    "supporting": [
      "07_Data_visualization_01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}