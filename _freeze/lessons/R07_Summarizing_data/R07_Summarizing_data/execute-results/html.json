{
  "hash": "0d55d139f2419dc096e80f9350ee77d0",
  "result": {
    "markdown": "---\ntitle: \"R07: Summarizing data with `tidyverse`\"\nauthor: \"Nicky Wakim\"\ntitle-slide-attributes:\n    data-background-color: \"#3070BF\"\ndate: \"10/23/2024\"\nformat: \n  revealjs:\n    theme: \"../simple_NW.scss\"\n    chalkboard: true\n    slide-number: true\n    show-slide-number: all\n    width: 1955\n    height: 1100\n    footer: R07 Slides\n    html-math-method: mathjax\n    highlight-style: arrow\nexecute:\n  echo: true\n  freeze: auto\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n# Introduction to the `tidyverse`\n\n## \n\n![](../img_slides/spiderverse.jpeg){fig-align=\"center\"}\n\n## What is the tidyverse?\n\nThe **tidyverse** is a collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.\n\n::: columns\n::: {.column width=\"45%\"}\n-   **ggplot2** - data visualisation\n-   **dplyr** - data manipulation\n-   **tidyr** - tidy data\n-   **readr** - read rectangular data\n-   **purrr** - functional programming\n-   **tibble** - modern data frames\n-   **stringr** - string manipulation\n-   **forcats** - factors\n-   and many more ...\n:::\n\n::: {.column width=\"55%\"}\n![](../img_slides/tidyverse.png){fig-align=\"center\" width=\"669\"}\n:::\n:::\n\n## Tidy data[^1]\n\n[^1]: Source: R for Data Science. Grolemund and Wickham.\n\n![](../img_slides/tidy-data-frame.png)\n\n1.  Each variable must have its own column.\n\n2.  Each observation must have its own row.\n\n3.  Each value must have its own cell.\n\n## `mutate()`: constructing new variables from what you have\n\n-   We've seen a couple examples for `mutate()` so far (mostly because its used so often!)\n\n-   We haven't seen an example where we make a new variable from two variables\n\n::: heq\nI want to make a variable that is the ratio of expenditures over age\n:::\n\n \n \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr1 = dds.discr %>% \n  rename(SAB = gender, \n         R_E = ethnicity)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr2 = dds.discr1 %>%\n  mutate(exp_to_age = expenditures/age)\n\nglimpse(dds.discr2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,000\nColumns: 7\n$ id           <int> 10210, 10409, 10486, 10538, 10568, 10690, 10711, 10778, 1…\n$ age.cohort   <fct> 13-17, 22-50, 0-5, 18-21, 13-17, 13-17, 13-17, 13-17, 13-…\n$ age          <int> 17, 37, 3, 19, 13, 15, 13, 17, 14, 13, 13, 14, 15, 17, 20…\n$ SAB          <fct> Female, Male, Male, Female, Male, Female, Female, Male, F…\n$ expenditures <int> 2113, 41924, 1454, 6400, 4412, 4566, 3915, 3873, 5021, 28…\n$ R_E          <fct> White not Hispanic, White not Hispanic, Hispanic, Hispani…\n$ exp_to_age   <dbl> 124.2941, 1133.0811, 484.6667, 336.8421, 339.3846, 304.40…\n```\n:::\n:::\n\n\n## Pipe operator (`magrittr`)\n\n-   The pipe operator (`%>%`) allows us to step through sequential functions in the same way we follow if-then statements or steps from instructions\n\n \n\n::: heq\nI want to find my keys, then start my car, then drive to work, then park my car.\n:::\n\n \n\n::: columns\n::: {.column width=\"50%\"}\n**Nested**\n\n\n::: {.cell}\n\n```{.r .cell-code}\npark(drive(start_car(find(\"keys\")), \n           to = \"work\"))\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n**Piped**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfind(\"keys\") %>%\n  start_car() %>%\n  drive(to = \"work\") %>%\n  park()\n```\n:::\n\n:::\n:::\n\n## Recoding a binary variable with pipe operator\n\n \n\n::: heq\nLet's say I want a variable `transmission` to show the category names that are assigned to numeric values in the code. I want `0` to be coded as `automatic` and `1` to be coded as `manual`.\n:::\n\n \n\n::: columns\n::: {.column width=\"50%\"}\nBase R:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars$transmission <-\n  ifelse(\n    mtcars$am == 0,\n    \"automatic\",\n    \"manual\"\n  )\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\nTidyverse:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars <- mtcars %>%\n  mutate(\n    transmission = case_when(\n      am == 0 ~ \"automatic\",\n      am == 1 ~ \"manual\"\n    )\n  )\n```\n:::\n\n\n \n\n::: hl\n`mutate()` creates new columns that are functions of existing variables\n:::\n:::\n:::\n\n## Recoding a multi-level variable\n\n \n\n::: heq\nLet's say I want a variable `gear` to show the category names that are assigned to numeric values in the code. I want `3` to be coded as gear `three`, `4` to be coded as gear `four`, `5` to be coded as gear `five`.\n:::\n\n \n\n::: columns\n::: {.column width=\"50%\"}\nBase R:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars$gear_char <-\n  ifelse(\n    mtcars$gear == 3,\n    \"three\",\n    ifelse(\n      mtcars$gear == 4,\n      \"four\",\n      \"five\"\n    )\n  )\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\nTidyverse:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars <- mtcars %>%\n  mutate(\n    gear_char = case_when(\n      gear == 3 ~ \"three\",\n      gear == 4 ~ \"four\",\n      gear == 5 ~ \"five\"\n    )\n  )\n```\n:::\n\n:::\n:::\n\n# Summarizing Data\n\n## `tbl_summary()` : table summary (1/2)\n\n-   What if I want one of those fancy summary tables that are at the top of most research articles? (lovingly called \"Table 1\")\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gtsummary)\ntbl_summary(dds.discr2)\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"fpkhgbyuwu\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#fpkhgbyuwu table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#fpkhgbyuwu thead, #fpkhgbyuwu tbody, #fpkhgbyuwu tfoot, #fpkhgbyuwu tr, #fpkhgbyuwu td, #fpkhgbyuwu th {\n  border-style: none;\n}\n\n#fpkhgbyuwu p {\n  margin: 0;\n  padding: 0;\n}\n\n#fpkhgbyuwu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#fpkhgbyuwu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#fpkhgbyuwu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#fpkhgbyuwu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#fpkhgbyuwu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#fpkhgbyuwu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#fpkhgbyuwu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#fpkhgbyuwu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#fpkhgbyuwu .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#fpkhgbyuwu .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#fpkhgbyuwu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#fpkhgbyuwu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#fpkhgbyuwu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#fpkhgbyuwu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#fpkhgbyuwu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fpkhgbyuwu .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#fpkhgbyuwu .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#fpkhgbyuwu .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#fpkhgbyuwu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fpkhgbyuwu .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#fpkhgbyuwu .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fpkhgbyuwu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#fpkhgbyuwu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fpkhgbyuwu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#fpkhgbyuwu .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fpkhgbyuwu .gt_left {\n  text-align: left;\n}\n\n#fpkhgbyuwu .gt_center {\n  text-align: center;\n}\n\n#fpkhgbyuwu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#fpkhgbyuwu .gt_font_normal {\n  font-weight: normal;\n}\n\n#fpkhgbyuwu .gt_font_bold {\n  font-weight: bold;\n}\n\n#fpkhgbyuwu .gt_font_italic {\n  font-style: italic;\n}\n\n#fpkhgbyuwu .gt_super {\n  font-size: 65%;\n}\n\n#fpkhgbyuwu .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#fpkhgbyuwu .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#fpkhgbyuwu .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#fpkhgbyuwu .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#fpkhgbyuwu .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#fpkhgbyuwu .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#fpkhgbyuwu .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#fpkhgbyuwu .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#fpkhgbyuwu div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;div data-qmd-base64=&quot;KipDaGFyYWN0ZXJpc3RpYyoq&quot;&gt;&lt;div class='gt_from_md'&gt;&lt;p&gt;&lt;strong&gt;Characteristic&lt;/strong&gt;&lt;/p&gt;&#10;&lt;/div&gt;&lt;/div&gt;\"><div data-qmd-base64=\"KipDaGFyYWN0ZXJpc3RpYyoq\"><div class='gt_from_md'><p><strong>Characteristic</strong></p>\n</div></div></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;div data-qmd-base64=&quot;KipOID0gMSwwMDAqKg==&quot;&gt;&lt;div class='gt_from_md'&gt;&lt;p&gt;&lt;strong&gt;N = 1,000&lt;/strong&gt;&lt;/p&gt;&#10;&lt;/div&gt;&lt;/div&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><div data-qmd-base64=\"KipOID0gMSwwMDAqKg==\"><div class='gt_from_md'><p><strong>N = 1,000</strong></p>\n</div></div><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">id</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">55,385 (31,759, 76,205)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">age.cohort</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    0-5</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">82 (8.2%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    6-12</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">175 (18%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    13-17</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">212 (21%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    18-21</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">199 (20%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    22-50</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">226 (23%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    51+</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">106 (11%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">age</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">18 (12, 26)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">SAB</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Female</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">503 (50%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Male</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">497 (50%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">expenditures</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">7,026 (2,898, 37,718)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">R_E</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    American Indian</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">4 (0.4%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Asian</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">129 (13%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Black</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">59 (5.9%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Hispanic</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">376 (38%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Multi Race</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">26 (2.6%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Native Hawaiian</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">3 (0.3%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Other</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">2 (0.2%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    White not Hispanic</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">401 (40%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">exp_to_age</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">462 (273, 938)</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"2\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;\"><sup>1</sup></span> <div data-qmd-base64=\"TWVkaWFuIChRMSwgUTMpOyBuICglKQ==\"><div class='gt_from_md'><p>Median (Q1, Q3); n (%)</p>\n</div></div></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n:::\n:::\n\n## `tbl_summary()` : table summary (2/2)\n\n-   Let's make this more presentable\n\n \n\n::: columns\n::: {.column width=\"70%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr2 %>%\n  select(-id, -age.cohort, -exp_to_age) %>%\n  tbl_summary(label = c(age ~ \"Age\", \n                        R_E ~ \"Race/Ethnicity\", \n                        SAB ~ \"Sex Assigned at Birth\", \n                        expenditures ~ \"Expenditures\") ,\n              statistic = list(all_continuous() ~ \"{mean} ({sd})\"))\n```\n:::\n\n:::\n\n::: {.column width=\"30%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"evgrwkwwfl\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#evgrwkwwfl table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#evgrwkwwfl thead, #evgrwkwwfl tbody, #evgrwkwwfl tfoot, #evgrwkwwfl tr, #evgrwkwwfl td, #evgrwkwwfl th {\n  border-style: none;\n}\n\n#evgrwkwwfl p {\n  margin: 0;\n  padding: 0;\n}\n\n#evgrwkwwfl .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#evgrwkwwfl .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#evgrwkwwfl .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#evgrwkwwfl .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#evgrwkwwfl .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#evgrwkwwfl .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#evgrwkwwfl .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#evgrwkwwfl .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#evgrwkwwfl .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#evgrwkwwfl .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#evgrwkwwfl .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#evgrwkwwfl .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#evgrwkwwfl .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#evgrwkwwfl .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#evgrwkwwfl .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#evgrwkwwfl .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#evgrwkwwfl .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#evgrwkwwfl .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#evgrwkwwfl .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#evgrwkwwfl .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#evgrwkwwfl .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#evgrwkwwfl .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#evgrwkwwfl .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#evgrwkwwfl .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#evgrwkwwfl .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#evgrwkwwfl .gt_left {\n  text-align: left;\n}\n\n#evgrwkwwfl .gt_center {\n  text-align: center;\n}\n\n#evgrwkwwfl .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#evgrwkwwfl .gt_font_normal {\n  font-weight: normal;\n}\n\n#evgrwkwwfl .gt_font_bold {\n  font-weight: bold;\n}\n\n#evgrwkwwfl .gt_font_italic {\n  font-style: italic;\n}\n\n#evgrwkwwfl .gt_super {\n  font-size: 65%;\n}\n\n#evgrwkwwfl .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#evgrwkwwfl .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#evgrwkwwfl .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#evgrwkwwfl .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#evgrwkwwfl .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#evgrwkwwfl .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#evgrwkwwfl .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#evgrwkwwfl .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#evgrwkwwfl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;div data-qmd-base64=&quot;KipDaGFyYWN0ZXJpc3RpYyoq&quot;&gt;&lt;div class='gt_from_md'&gt;&lt;p&gt;&lt;strong&gt;Characteristic&lt;/strong&gt;&lt;/p&gt;&#10;&lt;/div&gt;&lt;/div&gt;\"><div data-qmd-base64=\"KipDaGFyYWN0ZXJpc3RpYyoq\"><div class='gt_from_md'><p><strong>Characteristic</strong></p>\n</div></div></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;div data-qmd-base64=&quot;KipOID0gMSwwMDAqKg==&quot;&gt;&lt;div class='gt_from_md'&gt;&lt;p&gt;&lt;strong&gt;N = 1,000&lt;/strong&gt;&lt;/p&gt;&#10;&lt;/div&gt;&lt;/div&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><div data-qmd-base64=\"KipOID0gMSwwMDAqKg==\"><div class='gt_from_md'><p><strong>N = 1,000</strong></p>\n</div></div><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Age</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">23 (18)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Sex Assigned at Birth</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Female</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">503 (50%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Male</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">497 (50%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Expenditures</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">18,066 (19,543)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Race/Ethnicity</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    American Indian</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">4 (0.4%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Asian</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">129 (13%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Black</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">59 (5.9%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Hispanic</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">376 (38%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Multi Race</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">26 (2.6%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Native Hawaiian</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">3 (0.3%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    Other</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">2 (0.2%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    White not Hispanic</td>\n<td headers=\"stat_0\" class=\"gt_row gt_center\">401 (40%)</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"2\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height: 0;\"><sup>1</sup></span> <div data-qmd-base64=\"TWVhbiAoU0QpOyBuICglKQ==\"><div class='gt_from_md'><p>Mean (SD); n (%)</p>\n</div></div></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n:::\n:::\n\n## `group_by()`: group by one or more variables\n\n-   What if I want to quickly look at group differences?\n-   It will not change how the data look, but changes the actions of following functions\n\n::: heq\nI want to group my data by sex assigned at birth.\n:::\n\n \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr5 = dds.discr2 %>%\n  group_by(SAB)\nglimpse(dds.discr5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,000\nColumns: 7\nGroups: SAB [2]\n$ id           <int> 10210, 10409, 10486, 10538, 10568, 10690, 10711, 10778, 1…\n$ age.cohort   <fct> 13-17, 22-50, 0-5, 18-21, 13-17, 13-17, 13-17, 13-17, 13-…\n$ age          <int> 17, 37, 3, 19, 13, 15, 13, 17, 14, 13, 13, 14, 15, 17, 20…\n$ SAB          <fct> Female, Male, Male, Female, Male, Female, Female, Male, F…\n$ expenditures <int> 2113, 41924, 1454, 6400, 4412, 4566, 3915, 3873, 5021, 28…\n$ R_E          <fct> White not Hispanic, White not Hispanic, Hispanic, Hispani…\n$ exp_to_age   <dbl> 124.2941, 1133.0811, 484.6667, 336.8421, 339.3846, 304.40…\n```\n:::\n:::\n\n\n-   Let's see how the groups change something like the `summarize()` function in the next slide\n\n## `summarize()`: summarize your data or grouped data into one row\n\n-   What if I want to calculate specific descriptive statistics for my variables?\n-   This function is often best used with `group_by()`\n-   If only presenting the summaries, functions like `tbl_summary()` is better\n-   `summarize()` creates a new data frame, which means you can plot and manipulate the summarized data\n\n \n\n::: columns\n::: column\nOver whole sample:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr2 %>% \n  summarize(\n    ave = mean(expenditures),\n    SD = sd(expenditures),\n    med = median(expenditures))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n     ave     SD   med\n   <dbl>  <dbl> <dbl>\n1 18066. 19543.  7026\n```\n:::\n:::\n\n:::\n\n::: column\nGrouped by sex assigned at birth:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr2 %>% \n  group_by(SAB) %>% \n  summarize(\n    ave = mean(expenditures),\n    SD = sd(expenditures),\n    med = median(expenditures))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 4\n  SAB       ave     SD   med\n  <fct>   <dbl>  <dbl> <int>\n1 Female 18130. 20020.  6400\n2 Male   18001. 19068.  7219\n```\n:::\n:::\n\n:::\n:::\n\n## `across()`: apply a function across multiple columns\n\n-   Like `group_by()`, this function is often paired with another transformation function\n\n::: heq\nI want all my integer values to have two significant figures.\n:::\n\n \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr6 = dds.discr2 %>%\n  mutate(across(where(is.integer), signif, digits = 2))\n\nglimpse(dds.discr6)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,000\nColumns: 7\n$ id           <dbl> 10000, 10000, 10000, 11000, 11000, 11000, 11000, 11000, 1…\n$ age.cohort   <fct> 13-17, 22-50, 0-5, 18-21, 13-17, 13-17, 13-17, 13-17, 13-…\n$ age          <dbl> 17, 37, 3, 19, 13, 15, 13, 17, 14, 13, 13, 14, 15, 17, 20…\n$ SAB          <fct> Female, Male, Male, Female, Male, Female, Female, Male, F…\n$ expenditures <dbl> 2100, 42000, 1500, 6400, 4400, 4600, 3900, 3900, 5000, 29…\n$ R_E          <fct> White not Hispanic, White not Hispanic, Hispanic, Hispani…\n$ exp_to_age   <dbl> 124.2941, 1133.0811, 484.6667, 336.8421, 339.3846, 304.40…\n```\n:::\n:::\n\n\n# Summarizing categorical data and some data wrangling\n\n<!-- ::: {layout-ncol=3} -->\n\n:::::: columns\n::: {.column width=\"33%\"}\n![[dplyr](https://dplyr.tidyverse.org/)](../img_slides/hex-dplyr.png){fig-align=\"center\" height=\"300\"}\n:::\n\n::: {.column width=\"33%\"}\n![[magrittr](https://magrittr.tidyverse.org/)](../img_slides/magrittr.png){fig-align=\"center\" height=\"300\"}\n:::\n\n::: {.column width=\"33%\"}\n![[janitor](https://cran.r-project.org/web/packages/janitor/readme/README.html)](../img_slides/janitor_logo_small.png){fig-align=\"center\" height=\"300\"}\n:::\n::::::\n\n## Frequency tables: `count()`\n\n::::: columns\n::: {.column width=\"50%\"}\n-   `count` is from the `dplyr` package\n-   the output is a long tibble, and not a \"nice\" table\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr %>% count(ethnicity)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 2\n  ethnicity              n\n  <fct>              <int>\n1 American Indian        4\n2 Asian                129\n3 Black                 59\n4 Hispanic             376\n5 Multi Race            26\n6 Native Hawaiian        3\n7 Other                  2\n8 White not Hispanic   401\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr %>% \n  count(ethnicity, age.cohort)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 35 × 3\n   ethnicity       age.cohort     n\n   <fct>           <fct>      <int>\n 1 American Indian 13-17          1\n 2 American Indian 22-50          1\n 3 American Indian 51+            2\n 4 Asian           0-5            8\n 5 Asian           6-12          18\n 6 Asian           13-17         20\n 7 Asian           18-21         41\n 8 Asian           22-50         29\n 9 Asian           51+           13\n10 Black           0-5            3\n# ℹ 25 more rows\n```\n:::\n:::\n\n:::\n:::::\n\n## How to use the pipe `%>%`\n\nThe pipe operator `%>%` strings together commands to be performed sequentially\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr %>% head(n=3)      # pronounce %>% as \"then\"\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 6\n     id age.cohort   age gender expenditures ethnicity         \n  <int> <fct>      <int> <fct>         <int> <fct>             \n1 10210 13-17         17 Female         2113 White not Hispanic\n2 10409 22-50         37 Male          41924 White not Hispanic\n3 10486 0-5            3 Male           1454 Hispanic          \n```\n:::\n:::\n\n\n-   Always *first list the tibble* that the commands are being applied to\n-   Can use **multiple pipes** to run multiple commands in sequence\n    -   What does the following code do?\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr %>% head(n=3) %>% summary()\n```\n:::\n\n\n## Frequency tables: `janitor` package's `tabyl` function\n\n::::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\n# default table\ndds.discr %>% \n  tabyl(ethnicity)  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          ethnicity   n percent\n    American Indian   4   0.004\n              Asian 129   0.129\n              Black  59   0.059\n           Hispanic 376   0.376\n         Multi Race  26   0.026\n    Native Hawaiian   3   0.003\n              Other   2   0.002\n White not Hispanic 401   0.401\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n`adorn_` your table!\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4\"}\ndds.discr %>% \n  tabyl(ethnicity) %>%\n  adorn_totals(\"row\") %>% \n  adorn_pct_formatting(digits=2)  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          ethnicity    n percent\n    American Indian    4   0.40%\n              Asian  129  12.90%\n              Black   59   5.90%\n           Hispanic  376  37.60%\n         Multi Race   26   2.60%\n    Native Hawaiian    3   0.30%\n              Other    2   0.20%\n White not Hispanic  401  40.10%\n              Total 1000 100.00%\n```\n:::\n:::\n\n:::\n:::::\n\n## Relative frequency table\n\n::::: columns\n::: {.column width=\"40%\"}\n-   A **relative frequency** table shows **proportions (or percentages)** instead of counts\n\n-   To the right I removed (deselected) the counts column (`n`) to create a relative frequency table\n:::\n\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4-5\"}\ndds.discr %>% \n  tabyl(ethnicity) %>%\n  adorn_totals(\"row\") %>% \n  adorn_pct_formatting(digits=2) %>%   \n  select(-n) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          ethnicity percent\n    American Indian   0.40%\n              Asian  12.90%\n              Black   5.90%\n           Hispanic  37.60%\n         Multi Race   2.60%\n    Native Hawaiian   0.30%\n              Other   0.20%\n White not Hispanic  40.10%\n              Total 100.00%\n```\n:::\n:::\n\n:::\n:::::\n\n## Contingency tables (two-way tables)\n\n::::: columns\n::: {.column width=\"40%\"}\n-   **Contingency tables** summarize data for two categorical variables\n    -   with each value in the table representing the number of times\\\n        a particular combination of outcomes occurs\n-   **Row & column totals**\\\n    are sometimes called **marginal totals**\n:::\n\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2-3\"}\ndds.discr %>% \n  tabyl(ethnicity, gender) %>%    \n  adorn_totals(c(\"row\", \"col\"))    \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          ethnicity Female Male Total\n    American Indian      3    1     4\n              Asian     61   68   129\n              Black     26   33    59\n           Hispanic    192  184   376\n         Multi Race     13   13    26\n    Native Hawaiian      2    1     3\n              Other      1    1     2\n White not Hispanic    205  196   401\n              Total    503  497  1000\n```\n:::\n:::\n\n:::\n:::::\n\n## Contingency tables with percentages\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4-6\"}\ndds.discr %>% \n  tabyl(ethnicity, age.cohort) %>%\n  adorn_totals(c(\"row\")) %>%\n  adorn_percentages(\"row\") %>%   \n  adorn_pct_formatting(digits=0) %>%    \n  adorn_ns()    \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          ethnicity      0-5      6-12      13-17     18-21     22-50       51+\n    American Indian  0%  (0)  0%   (0)  25%   (1)  0%   (0) 25%   (1) 50%   (2)\n              Asian  6%  (8) 14%  (18)  16%  (20) 32%  (41) 22%  (29) 10%  (13)\n              Black  5%  (3) 19%  (11)  20%  (12) 15%   (9) 29%  (17) 12%   (7)\n           Hispanic 12% (44) 24%  (91)  27% (103) 21%  (78) 11%  (43)  5%  (17)\n         Multi Race 27%  (7) 35%   (9)  27%   (7)  8%   (2)  4%   (1)  0%   (0)\n    Native Hawaiian  0%  (0)  0%   (0)   0%   (0)  0%   (0) 67%   (2) 33%   (1)\n              Other  0%  (0)  0%   (0) 100%   (2)  0%   (0)  0%   (0)  0%   (0)\n White not Hispanic  5% (20) 11%  (46)  17%  (67) 17%  (69) 33% (133) 16%  (66)\n              Total  8% (82) 18% (175)  21% (212) 20% (199) 23% (226) 11% (106)\n```\n:::\n:::\n\n\n# Summarizing numeric data\n\n## We need to introduce a new dataset for this\n\n- Study investigating whether ACTN3 genotype at a particular location (residue 577) is associated with change in muscle function\n\n \n\n- **Categorical variable:** ACTN3 genotypes (CC, TT, CT)\n\n \n\n- **Numeric variable:** Muscle function, measured as percent change in non-dominant arm strength\n\n \n\n- We can start the investigation by plotting the relationship\n\n## Mean percent change by ACTN3 genotypes\n\n::::: columns\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(famuss$ndrm.ch)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 53.29109\n```\n:::\n\n```{.r .cell-code}\ndds.discr %>% \n  summarize(\n    ave = mean(expenditures),\n    SD = sd(expenditures),\n    med = median(expenditures))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n     ave     SD   med\n   <dbl>  <dbl> <dbl>\n1 18066. 19543.  7026\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndds.discr %>% \n  group_by(ethnicity) %>% \n  summarize(\n    ave = mean(expenditures),\n    SD = sd(expenditures),\n    med = median(expenditures))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 4\n  ethnicity             ave     SD    med\n  <fct>               <dbl>  <dbl>  <dbl>\n1 American Indian    36438. 25694. 41818.\n2 Asian              18392. 19209.  9369 \n3 Black              20885. 20549.  8687 \n4 Hispanic           11066. 15630.  3952 \n5 Multi Race          4457.  7332.  2622 \n6 Native Hawaiian    42782.  6576. 40727 \n7 Other               3316.  1836.  3316.\n8 White not Hispanic 24698. 20604. 15718 \n```\n:::\n:::\n\n:::\n:::::\n\n## `get_summary_stats()` from `rstatix` package\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr %>% get_summary_stats()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 13\n  variable         n   min   max median     q1     q3   iqr    mad   mean     sd\n  <fct>        <dbl> <dbl> <dbl>  <dbl>  <dbl>  <dbl> <dbl>  <dbl>  <dbl>  <dbl>\n1 id            1000 10210 99898 55384. 31809. 76135. 44326 3.27e4 5.47e4 2.56e4\n2 age           1000     0    95    18     12     26     14 1.04e1 2.28e1 1.85e1\n3 expenditures  1000   222 75098  7026   2899. 37713. 34814 7.76e3 1.81e4 1.95e4\n# ℹ 2 more variables: se <dbl>, ci <dbl>\n```\n:::\n\n```{.r .cell-code}\ndds.discr %>% \n  group_by(ethnicity) %>%\n  get_summary_stats(expenditures, type = \"common\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 11\n  ethnicity variable     n   min   max median    iqr   mean     sd     se     ci\n  <fct>     <fct>    <dbl> <dbl> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n1 American… expendi…     4  3726 58392 41818. 34085. 36438. 25694. 12847. 40885.\n2 Asian     expendi…   129   374 75098  9369  30892  18392. 19209.  1691.  3346.\n3 Black     expendi…    59   240 60808  8687  37987  20885. 20549.  2675.  5355.\n4 Hispanic  expendi…   376   222 65581  3952   7961. 11066. 15630.   806.  1585.\n5 Multi Ra… expendi…    26   669 38619  2622   2060.  4457.  7332.  1438.  2962.\n6 Native H… expendi…     3 37479 50141 40727   6331  42782.  6576.  3797. 16337.\n7 Other     expendi…     2  2018  4615  3316.  1298.  3316.  1836.  1298. 16499.\n8 White no… expendi…   401   340 68890 15718  39157  24698. 20604.  1029.  2023.\n```\n:::\n:::\n\n\n## How to force all output to be shown? (1/2)\n\nUse `kable()` from the `knitr` package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr %>% get_summary_stats() %>% kable()\n```\n\n::: {.cell-output-display}\n|variable     |    n|   min|   max|  median|       q1|       q3|   iqr|       mad|     mean|        sd|      se|       ci|\n|:------------|----:|-----:|-----:|-------:|--------:|--------:|-----:|---------:|--------:|---------:|-------:|--------:|\n|id           | 1000| 10210| 99898| 55384.5| 31808.75| 76134.75| 44326| 32734.325| 54662.85| 25643.673| 810.924| 1591.310|\n|age          | 1000|     0|    95|    18.0|    12.00|    26.00|    14|    10.378|    22.80|    18.462|   0.584|    1.146|\n|expenditures | 1000|   222| 75098|  7026.0|  2898.75| 37712.75| 34814|  7760.670| 18065.79| 19542.831| 617.999| 1212.724|\n:::\n:::\n\n\n## How to force all output to be shown? `knitr` (2/2)\n\nUse `kable()` from the `knitr` package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndds.discr %>% \n  group_by(ethnicity) %>%\n  get_summary_stats(expenditures, type = \"common\") %>% \n  kable()\n```\n\n::: {.cell-output-display}\n|ethnicity          |variable     |   n|   min|   max|  median|      iqr|      mean|        sd|        se|        ci|\n|:------------------|:------------|---:|-----:|-----:|-------:|--------:|---------:|---------:|---------:|---------:|\n|American Indian    |expenditures |   4|  3726| 58392| 41817.5| 34085.25| 36438.250| 25693.912| 12846.956| 40884.748|\n|Asian              |expenditures | 129|   374| 75098|  9369.0| 30892.00| 18392.372| 19209.225|  1691.278|  3346.482|\n|Black              |expenditures |  59|   240| 60808|  8687.0| 37987.00| 20884.593| 20549.274|  2675.288|  5355.170|\n|Hispanic           |expenditures | 376|   222| 65581|  3952.0|  7961.25| 11065.569| 15629.847|   806.048|  1584.940|\n|Multi Race         |expenditures |  26|   669| 38619|  2622.0|  2059.75|  4456.731|  7332.135|  1437.950|  2961.514|\n|Native Hawaiian    |expenditures |   3| 37479| 50141| 40727.0|  6331.00| 42782.333|  6576.462|  3796.922| 16336.838|\n|Other              |expenditures |   2|  2018|  4615|  3316.5|  1298.50|  3316.500|  1836.356|  1298.500| 16499.007|\n|White not Hispanic |expenditures | 401|   340| 68890| 15718.0| 39157.00| 24697.549| 20604.376|  1028.933|  2022.793|\n:::\n:::\n\n\n\n# Resources\n\n## `dplyr` resources\n\n-   [More `dpylr` functions to reference!](https://dplyr.tidyverse.org/reference/index.html)\n\nAdditional details and examples are available in the vignettes:\n\n-   [column-wise operations vignette](https://dplyr.tidyverse.org/articles/colwise.html)\n\n-   [row-wise operations vignette](https://dplyr.tidyverse.org/articles/rowwise.html)\n\n \n\nand the dplyr 1.0.0 release blog posts:\n\n-   [working across columns](https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-colwise/)\n-   [working within rows](https://www.tidyverse.org/blog/2020/04/dplyr-1-0-0-rowwise/)\n\n## R programming class at OHSU!\n\nYou can check out [Dr. Jessica Minnier's R class page](https://sph-r-programming-2022.netlify.app/) if you want more notes, videos, etc.\n\n## The larger tidy ecosystem\n\nJust to name a few...\n\n-   [janitor](https://garthtarr.github.io/meatR/janitor.html)\n\n-   [kableExtra](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html)\n\n-   [patchwork](https://patchwork.data-imaginist.com/)\n\n-   [gghighlight](https://cran.r-project.org/web/packages/gghighlight/vignettes/gghighlight.html)\n\n-   [tidybayes](https://mjskay.github.io/tidybayes/)\n\n## Credit to Mine Çetinkaya-Rundel\n\n-   These notes were built from Mine's notes\n\n    -   Most pages and code were left as she made them\n\n    -   I changed a few things to match our class\n\n-   Please see [her Github repository](https://github.com/mine-cetinkaya-rundel/teach-ds-wsc-2021/tree/main) for the original notes\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}